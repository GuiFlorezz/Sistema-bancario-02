# Sistema-bancario-02
# -*- coding: utf-8 -*-
"""Cópia de M03 -Projeto.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1gHxVbUr7hdi5_8Z6HCC9qTCok4cvMdz5

SISTEMA BANCÁRIO
Criar uma lógica para simular um fluxo de um sistema bancário

Esse programa deverá contar:
1.Um menu de seleção de operação
2.Criação de contas
3.Remoção de contas
4.listagem de contas criadas
5.Adicionar saldo/ Remover saldo
6.Transderir valor entre contas
7.Consultar saldo de uma conta específica

As contas devemser armazenadas em uma lista e cada conta deve ser um dicionário(chave-valor) contendo as seguintes chaves:

1.numoro_conta
2saldo_conta
"""

from re import T
contas = []
def criar_conta():
  verificador_conta_existente = False
  dados_nova_conta = {}
  dados_nova_conta['numero_conta'] = input('Digite o número da nova conta:\n>>> ')


  for conta_em_consulta in contas:
    if conta_em_consulta['numero_conta'] == dados_nova_conta['numero_conta']:
      verificador_conta_existente = True
      break
  if verificador_conta_existente == True:
    print('\nO número da conta já existe. Tente novamente.')
  else:
    dados_nova_conta['saldo_conta'] = float(input('Digite o saldo da nova conta:\n>>> '))
    contas.append(dados_nova_conta)
    print('\nOperação efetuada com sucesso!')

def remover_conta():
  numero_conta = input('Digite o número da conta para remover:\n>>> ')
  conta_encontrada = False
  for conta_em_consulta in contas:
    if conta_em_consulta['numero_conta'] == numero_conta:
      conta_encontrada = True
      contas.remove(conta_em_consulta)
      print('\nOperação efetuada com sucesso.')
      break

  if not conta_encontrada:


      print('n\O número da conta não existe. Tente novamente.')

def listar_contas():
  if len(contas) == 0:
    print('\nNão há contas cadastradas.')
  else:
    index = 1
    for conta_em_consulta in contas:
      if conta_em_consulta['saldo_conta'] >= 0:
        status = 'positivo'
      else:
        status = 'Negativo'
      print(f"{index} - Número de contas: {conta_em_consulta['numero_conta']} \ saldo da conta: R$ {conta_em_consulta['saldo_conta']:.2f} ({status})")
      index += 1

def adicionar_saldo_em_conta():
  numero_conta = input('Digite o número da conta:\n>>> ')
  for conta_em_consulta in contas:
    if conta_em_consulta['numero_conta'] == numero_conta:
      valor_credito = float(input('Digite o valor do crédito:\n>>> R$'))
      if valor_credito <0:
        print('\nValores negativos não são aceitos. Tente novamente.')
        return
      else:
        conta_em_consulta['saldo_conta'] += valor_credito
        print('n\Opereação foi efetuada com sucesso.')
        return
  print('n\O número da conta não foi encontrado. Tente novamente.')


def remover_saldo_em_conta():
  numero_conta = input('Digite o número da conta:\n>>> ')
  for conta_em_consulta in contas:
    if conta_em_consulta['numero_conta'] == numero_conta:
      valor_debito = float(input('Digite o valor do debito:\n>>> R$'))
      if valor_debito <0:
        print('\nValores negativos não são aceitos. Tente novamente.')
        return
      else:
        conta_em_consulta['saldo_conta'] -= valor_debito
        print('n\Opereação foi efetuada com sucesso.')
        return
  print('n\O número da conta não foi encontrado. Tente novamente.')


def transferir_saldo_entre_contas():
  conta_partida = input('Digite o número da sua conta:n\>>> ')
  verificador_etapa = 0

  #procurar a primeira conta
  for conta_em_consulta in contas:
    if conta_em_consulta['numero_conta'] == conta_partida:
      verificador_etapa = 1
      conta_destino = input('Digite o numero da conta destino:n\>>> ')
    if conta_destino != conta_partida:

      #procurar a segunda conta
      for conta_destino_em_consulta in contas:
        if conta_destino_em_consulta['numero_conta'] == conta_destino:
          verificador_etapa = 3
          valor_transferencia = float(input('Digite o valor da transferência\n>>> R$  '))


          # Verificar se o valor é negativo
          if valor_transferencia <0:
            print('\nNão é possível transferir um valor negativo.')
            break

          # Verificar se o saldo é suficiente
          elif valor_transferencia > conta_em_consulta['saldo_conta']:
            print('\nNão é possível transferir um valor maior que seu saldo.')
            break
          else:
            conta_em_consulta['saldo_conta'] -= valor_transferencia
            conta_destino_em_consulta['saldo_conta'] += valor_transferencia
            print('\nOperação efetuada com sucesso.')
            break


      print()
    else:
      verificador_etapa = 2
      break

  if verificador_etapa == 0:
    print('\nA sua conta não foi encontrada. Tente novamente.')
  elif verificador_etapa == 1:
    print('\nA conta de destino não foi encontrada. Tente novamente.')
  elif verificador_etapa == 2:
    print('\nNão é possível transferir dinheiro para a mesma conta.')



def consultar_saldo_de_contas():
  numero_conta = input('Digite o número da conta para consultar o saldo:\n>>> ')
  for conta_em_consulta in contas:
    if conta_em_consulta['numero_conta'] == numero_conta:
       if conta_em_consulta['saldo_conta'] >= 0:
         status = 'positivo'
       else:
          status = 'Negativo'
       print(f"\nO saldo é R$: {conta_em_consulta['saldo_conta']:.2f} ([{status}])")
       return
  print('\nO número da conta não foi encontrado. Tente novamente.')
print('>>> Bem vindo ao sistema bancário <<<')
programa_ativo = True


while True:
  print(contas)
  print('\n### Menu ###')
  print('\0 - Sair')
  print('1 - Criar uma nova conta')
  print('2 - Remover uma conta')
  print('3 - Listar todas as contas')
  print('4 - Adiciobnar saldo (creditar)')
  print('5 - Remover saldo (debitar)')
  print('6 - Transferir valor entre contas')
  print('7 - Consultar saldo de uma conta')



  numero_operação = input('Selecione a opereação que deseja realizar:\n>>> ')

  if numero_operação == '0':
    print('\nSistema encerrado.')
    break


# Operação 1 - Criar uma nova conta
  elif numero_operação == '1':
    criar_conta()

# Operação 2 - Remover uma conta
  elif numero_operação == '2':
    remover_conta()

# Operação 3 - Listar conta
  elif numero_operação == '3':
    listar_contas()


# Operalção 4 - Adicionar saldo
  elif numero_operação == '4':
    adicionar_saldo_em_conta()



# Operação 5 - Remover saldo
  elif numero_operação == '5':
    remover_saldo_em_conta()


# Operação 6 - transferir saldo entre contas
  elif numero_operação == '6':
    transferir_saldo_entre_contas()

# Operação 7 - consultar saldo
  elif numero_operação == '7':
    consultar_saldo_de_contas()





# Operação Inválida
  else:
    print('\nOperação invalido')
